<?phpif ( ! defined( 'ABSPATH' ) ) {	exit; // Exit if accessed directly}class POD_Twilio_Payment_History {		/*	*	@var integer	*	@private	*	user id	*/	private $_id;		/**	*	@array	*	@public	*	user payment history	**/	//public $_user_payment_history;		/*		*	@array	*	@private	*	user details of of provided user id	*///	private $_user_details;			/*	*	@private	*	instance of global $wpdb for accessing database	*/	private $_db;		/*	*	@var integer	*	@public	*	total number of payment log entries	*/	public $_total_logs;		public function __construct( $user_id ){		global $wpdb;		$this->_db = $wpdb;		$this->_id = $user_id;		$this->_total_logs = pod_twilio_count_total_table_rows( POD_TWILIO_PAYEMENT_HISTORY, array("user_id" => $this->_id) );	}		public function get_user_payment_history_with_pagination(  $limit, $pagenum, $cols = array(), $where = array(), $order_by = " ORDER BY payment_date DESC " ){		$offset = ( $pagenum - 1 ) * $limit;		$query = "SELECT ";		if(  is_array( $cols ) && ! empty( $cols ) ){			$cols = implode( ",", array_filter( $cols ) );			$query .= $cols;		}		else{			$query .= " * ";		}				$query .= " FROM " . POD_TWILIO_PAYEMENT_HISTORY . " WHERE ";				if(  is_array( $where ) && ! empty( $where ) ){			unset( $where["user_id"] );			$where = implode( " AND ", array_filter( $where ) );			$query .= $where . " AND user_id=".$this->_id;		}		else{			$query .= " user_id=".$this->_id;		}				if( ! is_null( $order_by ) && $order_by != "" ){			$query .= $order_by;		}				$query .= " LIMIT ". $offset .", ". $limit;				$payment_details = $this->_db->get_results( $query );		return $payment_details;	}		public function get_user_payment_history( $cols = array(), $where = array(), $order_by = " ORDER BY payment_date DESC " ){		$query = "SELECT ";		if(  is_array( $cols ) && ! empty( $cols ) ){			$cols = implode( ",", array_filter( $cols ) );			$query .= $cols;		}		else{			$query .= " * ";		}				$query .= " FROM " . POD_TWILIO_PAYEMENT_HISTORY . " WHERE ";				if(  is_array( $where ) && ! empty( $where ) ){			unset( $where["user_id"] );			$where = implode( " AND ", array_filter( $where ) );			$query .= $where . " AND user_id=".$this->_id;		}		else{			$query .= " user_id=".$this->_id;		}				if( ! is_null( $order_by ) && $order_by != "" ){			$query .= $order_by;		}				$payment_details = $this->_db->get_results( $query );		return $payment_details;	}}